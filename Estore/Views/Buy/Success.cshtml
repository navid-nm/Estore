@model Estore.Models.Payment;

@{
    Item item = (Item)ViewBag.ItemToBuy;
    User buyer = (User)ViewBag.Buyer;
    ViewData["Title"] = item.Name;
    var url = "/img/generic/invertedplaceholder.png";
    @if (item.ImageUrls != null)
    {
        if (item.ImageUrls.Count > 0) url = item.ImageUrls[0];
    }
    var img = "../" + url.Substring(url.IndexOf("img")).Replace("\\", "/");
}

<hr />
    <div id="preview-container" class="row">
        <div class="col-3">
            <img src="@img" class="search-result-image" />
        </div>
        <div class="col-9">
            <h5>Purchasing:</h5>
            <h6>@item.Name</h6>
            <span class="text-secondary">
                @item.GetConditionDisplayName(item.Quality)
            </span>
        </div>
    </div>
<hr />

<form class="form-row" method="post" asp-controller="Buy">
    <div class="form-group col-md-9">
        <div id="payment-select-section" class="border-bottom border-right pt-1 w-75">
            <label for="method">Payment method:</label>
            <select class="form-control col-md-5" asp-for="Method" name="Quality"
                    asp-items="@Html.GetEnumSelectList<PaymentMethod>()"></select>
            <br />
            <span asp-validation-for="Method"></span>
        </div>
        <div class="pt-4 w-75 border-bottom border-right">
            Shipping address <a href="#">(Change)</a>:
            <div class="text-secondary pt-4">
                <i>
                    @buyer.ShippingLocation.Address<br />
                    @buyer.ShippingLocation.PostalCode
                </i>
            </div>
            <br /><br />
        </div>
    </div>
    <div class="form-group col-md-3 pt-2 border text-center">
        <b>Amount due:</b> £@item.Price<br />
        <div class="text-secondary pt-1"><b>Shipping cost:</b> £@item.Price</div>
        <div class="pt-1"></div><hr />
        <div class="pt-2">
            <button type="button" class="btn btn-outline-primary">
                Confirm and pay
            </button>
        </div>
    </div>
</form>


